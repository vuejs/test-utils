# –ü–ª–∞–≥–∏–Ω—ã

–ü–ª–∞–≥–∏–Ω—ã –¥–æ–±–∞–≤–ª—è—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–ª—è Vue Test Utils' API. –≠—Ç–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —Ä–∞—Å—à–∏—Ä–∏—Ç—å Vue Test Utils' API –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ª–æ–≥–∏–∫–∏, –º–µ—Ç–æ–¥–æ–≤ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤:

1. –ü—Å–µ–≤–¥–æ–Ω–∏–º—ã –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤
2. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫ —ç–∫–∑–µ–º–ø–ª—è—Ä—É –æ–±–æ–ª–æ—á–∫–∏
3. –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫ –æ–±–æ–ª–æ—á–∫–µ

## –û–±–æ–ª–æ—á–∫–∞ –ø–ª–∞–≥–∏–Ω–∞

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω—ã, –≤—ã–∑–≤–∞–≤ `config.plugins.VueWrapper.install()` –º–µ—Ç–æ–¥. –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–¥–µ–ª–∞–Ω–æ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –≤—ã –≤—ã–∑–æ–≤–∏—Ç–µ `mount`.

`install()` –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–∏—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä `WrapperAPI`, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏ –∑–∞–∫—Ä—ã—Ç—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞.

```js
// setup.js —Ñ–∞–π–ª
import { config } from '@vue/test-utils'

// –õ–æ–∫–∞–ª—å–Ω–æ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –ø–ª–∞–≥–∏–Ω, —Å–º–æ—Ç—Ä–∏—Ç–µ "Writing a Plugin"
import MyPlugin from './myPlugin'

// –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–ª–∞–≥–∏–Ω –≤ VueWrapper
config.plugins.VueWrapper.install(MyPlugin)
```

–í—ã –º–æ–∂–µ—Ç–µ, –ø–æ –∂–µ–ª–∞–Ω–∏—é, –ø–µ—Ä–µ–¥–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```js
config.plugins.VueWrapper.install(MyPlugin, { someOption: true })
```

–í–∞—à –ø–ª–∞–≥–∏–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –æ–¥–∏–Ω —Ä–∞–∑. –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Jest, —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–¥–µ–ª–∞–Ω–æ –≤ –≤–∞—à–µ–º Jest `setupFiles` –∏–ª–∏ `setupFilesAfterEnv` –∫–æ–Ω—Ñ–∏–≥ —Ñ–∞–π–ª–µ.

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–ª–∞–≥–∏–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç `config.plugins.VueWrapper.install()`, –∫–æ–≥–¥–∞ –∏—Ö –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç. –≠—Ç–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–æ, –µ—Å–ª–∏ –æ–Ω–∏ —Ä–∞—Å—à–∏—Ä—è—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ø–ª–∞–≥–∏–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ.

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [Vue Community Guide](https://vue-community.org/guide/ecosystem/testing.html) –∏–ª–∏ [awesome-vue](https://github.com/vuejs/awesome-vue#test) –¥–ª—è –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º.

### –ù–∞–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞

Vue Test Utils –ø–ª–∞–≥–∏–Ω - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç —Å–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `VueWrapper` –∏–ª–∏ `DOMWrapper` —ç–∫–∑–µ–º–ø–ª—è—Ä –∏ –º–æ–∂–µ—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ.

#### –ë–∞–∑–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω

–ù–∏–∂–µ —É–∫–∞–∑–∞–Ω –ø—Ä–æ—Å—Ç–æ–π –ø–ª–∞–≥–∏–Ω –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É–¥–æ–±–Ω–æ–≥–æ –ø—Å–µ–≤–¥–æ–Ω–∏–º–∞ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è `wrapper.element` –∫ `wrapper.$el`

```js
// setup.js
import { config } from '@vue/test-utils'

const myAliasPlugin = (wrapper) => {
  return {
    $el: wrapper.element // –ø—Ä–æ—Å—Ç—ã–µ –ø—Å–µ–≤–¥–æ–Ω–∏–º—ã
  }
}

// –í—ã–∑–æ–≤–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –¥–ª—è —Ç–∏–ø–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Ö–æ—Ç–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–∏—Ç—å
// –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å –ø–ª–∞–≥–∏–Ω –¥–ª—è –ª—é–±–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ config.plugins
config.plugins.VueWrapper.install(myAliasPlugin)
```

–ò –≤ –≤–∞—à–µ–º —Ç–µ—Å—Ç–µ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—à –ø–ª–∞–≥–∏–Ω –ø–æ—Å–ª–µ `mount`.

```js
// component.spec.js
const wrapper = mount({ template: `<h1>üîå Plugin</h1>` })
console.log(wrapper.$el.innerHTML) // üîå Plugin
```

#### Data Test ID –ü–ª–∞–≥–∏–Ω

–ù–∏–∂–µ –ø–ª–∞–≥–∏–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥ `findByTestId` –∫ `VueWrapper` —ç–∫–∑–µ–º–ø–ª—è—Ä—É. –≠—Ç–æ –ø–æ–æ—â—Ä—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤, –ø–æ–ª–∞–≥–∞—é—â–∏—Ö—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –≤ –≤–∞—à–∏—Ö Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:

`MyComponent.vue`:

```vue
<template>
  <MyForm class="form-container" data-testid="form">
    <MyInput data-testid="name-input" v-model="name" />
  </MyForm>
</template>
```

`MyComponent.spec.js`:

```js
const wrapper = mount(MyComponent)
wrapper.findByTestId('name-input') // –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç VueWrapper –∏–ª–∏ DOMWrapper
```

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–≥–∏–Ω–∞:

```js
import { config, DOMWrapper} from '@vue/test-utils'

const DataTestIdPlugin = (wrapper) => {
  function findByTestId(selector) {
    const dataSelector = `[data-testid='${selector}']`
    const element = wrapper.element.querySelector(dataSelector)
    return new DOMWrapper(element)
  }

  return {
    findByTestId
  }
}

config.plugins.VueWrapper.install(DataTestIdPlugin)
```

## Stubs Plugin

`config.plugins.createStubs` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≥–ª—É—à–µ–∫, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ–µ VTU.

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
* –í—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ª–æ–≥–∏–∫–∏ –≤ –∑–∞–≥–ª—É—à–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã)
* –í—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
config.plugins.createStubs = ({ name, component }) => {
  return defineComponent({
    render: () => h(`custom-${name}-stub`)
  })
}
```

–≠—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ –∫–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ VTU –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞–≥–ª—É—à–∫—É –ª–∏–±–æ –∏–∑
```typescript
const wrapper = mount(Component, {
  global: {
    stubs: {
      ChildComponent: true
    }
  }
})
```

–ª–∏–±–æ

```typescript
const wrapper = shallowMount(Component)
```

–ù–æ –Ω–µ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞, –∫–æ–≥–¥–∞ –≤—ã —è–≤–Ω–æ —É–∫–∞–∂–µ—Ç–µ –∑–∞–≥–ª—É—à–∫—É

```typescript
const wrapper = mount(Component, {
  global: {
    stubs: {
      ChildComponent: { template: '<child-stub/>' }
    }
  }
})
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞ —Å TypeScript

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø–ª–∞–≥–∏–Ω–∞ —Å [TypeScript](https://www.typescriptlang.org/) –≤–∞–º –Ω—É–∂–Ω–æ –æ–±—ä—è–≤–∏—Ç—å –≤–∞—à—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é. –°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –¥–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª, –Ω–∞–∑–≤–∞–Ω–Ω—ã–π `vue-test-utils.d.ts`, —Å —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```typescript
import { DOMWrapper } from '@vue/test-utils';

declare module '@vue/test-utils' {
  interface VueWrapper {
    findByTestId(testId: string): DOMWrapper[];
  }
}
```

## –û–ø—É–±–ª–∏–∫—É–π—Ç–µ –≤–∞—à –ø–ª–∞–≥–∏–Ω

–ï—Å–ª–∏ –≤–∞–º –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Vue Test Utils –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ –µ–≥–æ –≤ [Vue Community Guide](https://vue-community.org/guide/ecosystem/testing.html) –∏–ª–∏ [awesome-vue](https://github.com/vuejs/awesome-vue#test).
